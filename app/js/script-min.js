"use strict";!function(e){e.fn.simpleSendForm=function(t){(t=e.extend({successTitle:"Спасибо, что выбрали нас!",successText:"Мы свяжемся с Вами в ближайшее время.",errorTitle:"Сообщение не отправлено!",errorSubmit:"Ошибка отправки формы!",errorNocaptcha:"Вы не заполнили каптчу",errorCaptcha:"Вы не прошли проверку каптчи",mailUrl:"/form-submit/submit.php",autoClose:!1,autoCloseDelay:5e3,debug:!1,captcha:!1,captchaPublicKey:"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI"},t)).captcha&&(window.onload=function(){var e=document.createElement("script");e.src="https://www.google.com/recaptcha/api.js",document.body.appendChild(e)});return this.each(function(){var o=e(this),s=o.find(".form__form"),i=o.find(".btn-submit"),a=o.find(".recaptcha");t.captcha&&a.append('<div class="g-recaptcha" data-sitekey="'+t.captchaPublicKey+'"></div>'),e(this).submit(function(){var a=e(this).serialize();function c(e){i.parents(s).removeClass("sending"),o.append('<div class="form__error alert alert-danger text-center">'+e+"</div>"),setTimeout(function(){o.find(".form__error").remove()},5e3)}return e.ajax({url:t.mailUrl,type:"POST",data:a,beforeSend:function(){i.parents(s).addClass("sending")},success:function(s){1==s?(o[0].reset(),t.captcha&&grecaptcha.reset(),o.find(".form__hide-success").slideUp().delay(5e3).slideDown(),i.parents(".form__form").removeClass("sending"),o.find(".form__hide-success").after('<div class="form__sys-message alert alert-success text-center"></div>'),o.find(".form__sys-message").html('<h4 class="form__success-title">'+t.successTitle+'</h4><p class = "form__success-text" >'+t.successText+"</p>"),setTimeout(function(){o.find(".form__sys-message").fadeOut().delay(3e3).remove(),t.autoClose&&e.magnificPopup.close()},t.autoCloseDelay)):c(2==s?t.errorNocaptcha:3==s?t.errorCaptcha:t.errorSubmit),t.debug&&console.log(s)},error:function(){c(t.errorSubmit)}}),!1})})}}(jQuery),jQuery(document).ready(function(e){e("#feedbackForm").simpleSendForm({successTitle:"Спасибо! Ваша подписка на Training успешно оформлена.",successText:"",captcha:!1,mailUrl:"/mail/training/form-submit/submit.php"}),e("#feedbackForm2").simpleSendForm({successTitle:"<span style='color:white;'>Спасибо! Ваша подписка на Training успешно оформлена.</span>",successText:"",captcha:!1,mailUrl:"/mail/training/form-submit/submit.php"}),e("#feedbackForm3").simpleSendForm({successTitle:"<span style='color:white;'>Спасибо! Ваша подписка на новости успешно оформлена.</span>",successText:"",captcha:!1,mailUrl:"/mail/training/form-submit/submit.php"}),e("#feedbackForm4").simpleSendForm({successTitle:"<span style='color:white;'>Выполнено. Вы отписались от рассылки.</span>",successText:"",captcha:!1,mailUrl:"/mail/training/form-submit/submit.php"}),e("#callbackForm").simpleSendForm({successTitle:"Ваша заявка принята!",successText:"Наш сотрудник свяжется с Вами в самое ближайшее время.",autoClose:!0,autoCloseDelay:3e3,mailUrl:"/mail/training/submit.php",captcha:!1}),e(".modal-popup").magnificPopup({type:"inline",fixedContentPos:!1,fixedBgPos:!0,overflowY:"auto",closeBtnInside:!0,preloader:!1,midClick:!0,removalDelay:300,mainClass:"mfp-top-up"})}),$(function(){$(".unsub__button").on("click",function(){$("footer").toggleClass("mooved"),setTimeout(function(){$("html, body").animate({scrollTop:document.body.scrollHeight},"slow")},150)}),$(window).on("wheel",function(e){e.originalEvent.wheelDelta>0&&$("footer").removeClass("mooved")}),$(window).on("scroll",function(e){$("#toTop").addClass("mooved"),setTimeout(function(){$("#toTop").removeClass("mooved")},100)}),$("#toTop").on("click",function(){$("html, body").animate({scrollTop:0},800)});var e=[].slice.call($('a[href*="#"]'));e.forEach(function(e){$(e).on("click",function(t){t.preventDefault();var o=document.querySelector($(e).attr("href")).getBoundingClientRect().top+window.pageYOffset,s=setInterval(function(){var e=o/20;e>window.pageYOffset-o&&window.innerHeight+window.pageYOffset<document.body.offsetHeight?window.scrollBy(0,e):(window.scrollTo(0,o),clearInterval(s))},15)})})});